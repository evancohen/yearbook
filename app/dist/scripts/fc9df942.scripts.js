"use strict";var app=angular.module("yearbookApp",["ngCookies","ngResource","ngSanitize","ngRoute","restangular"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"mainController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0).hashPrefix("!")}]);app.config(["RestangularProvider",function(a){a.setBaseUrl("http://yearbook.evanc.me/api"),a.setResponseExtractor(function(a){return a.data}),a.setDefaultHttpFields({cache:!0}),a.setDefaultHeaders({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"})}]),angular.module("yearbookApp").controller("mainController",["$scope","apiService",function(a,b){function c(b){console.log(b),b.isPrivate||(console.log("adding note",b),a.notes.unshift(b))}a.showForm=!1,a.posted=!1,b.getNotes().then(function(b){a.notes=_.sortBy(b,function(a){return 0-a.id})}),a.submit=function(){var d={name:a.iname,body:a.ibody,isPrivate:a.iprivate?!0:!1,major:a.imajor};b.postNote(d).then(function(b){c(b),a.posted=!0})}}]),angular.module("yearbookApp").service("apiService",["Restangular","$q",function(a,b){var c={};return c.postNote=function(c){var d=b.defer();return a.all("note/post").post(c).then(function(a){d.resolve(a)},function(a){console.log(a),d.reject(a)}),d.promise},c.getNotes=function(){var c=b.defer();return a.one("note").get().then(function(a){"undefined"!=typeof a&&c.resolve(a),c.reject("Could not get notes...")}),c.promise},c}]);